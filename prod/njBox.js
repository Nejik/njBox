!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("njBox",[],e):"object"==typeof exports?exports.njBox=e():t.njBox=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),l=i(a),c=n(2),d=window.jQuery||l.default,h=function(){function t(e,n){if(o(this,t),!arguments.length)return void console.error("njBox, arguments not passed.");var i=void 0;!n&&e?i=d.isPlainObject(e)?e:{elem:e}:(i=n,i.elem=e),i=i||{},this._init(i)}return r(t,[{key:"_init",value:function(e){var n=this.o=d.extend({},t.defaults,e);if(this.active=0,this.state={},this._globals={},this._handlers={},this.v={document:d(document),window:d(window),html:d(document.documentElement),body:d(document.body)},!n.elem&&!n.content)return void this._error("njBox, no elements (o.elem) or content (o.content) for modal.");if(n.elem){var i=d(n.elem);if(!i.length)return void this._error("njBox, element not found ("+n.elem+")");if(i.length>1&&(i=d(i[0])),i[0].njBox)return void this._error("njBox, already inited on this element");i[0].njBox=this,d.extend(!0,this.o,this._gatherData(i)),this.els=this._gatherElements()}this.items=this._createItems(this._createRawItems()),this._createDom(),this._calculateAnimations(),this._setClickHandlers(),this.state.inited=!0,this._cb("inited")}},{key:"show",value:function(t){t&&(this.active=parseInt(t));this.o;if("inited"!==this.state.state)return void this._error("njBox, show, plugin not inited or in not inited state(probably plugin is already visible or destroyed, or smth else..)");if(!this.items.length)return void this._error("njBox, smth goes wrong, plugin don't create any item to show",!0);if(this._cb("show")!==!1)return this.v.container[0].njm_instances?this.v.container[0].njm_instances++:this.v.container[0].njm_instances=1,this.v.container.addClass("njm-open"),this._scrollbar("hide"),this._overlay("show"),this._cb("before_insert"),this._setEventsHandlers(),this._drawItem(this.active),this.v.container[0].appendChild(this.v.wrap[0]),this.position(),this._anim("show"),this}},{key:"hide",value:function(){if("shown"!==this.state.state)return void this._error("njBox, hide, we can hide only showed modal (probably animation is still running).");this.o,this._handlers;if(this._cb("hide")!==!1)return this._overlay("hide"),this._removeEventsHandlers(),this._anim("hide"),this}},{key:"position",value:function(){if(this.state.inited){var t=this.o;if(this._getContainerSize(),"absolute"===t.position){var e=this.state.dimensions.containerScrollTop,n=this.state.dimensions.containerScrollLeft;e<=this.state.dimensions.containerMaxScrollTop&&this.v.wrap.css({top:e+"px",left:n+"px"}),this.v.overlay.css({width:"auto",height:"auto"}),this.v.overlay[0].clientHeight,this.v.overlay.css({width:this.state.dimensions.containerScrollWidth+"px",height:this.state.dimensions.containerScrollHeight+"px"})}return this._setMaxHeight(this.items[this.active]),this._cb("positioned"),this}}},{key:"_getContainerSize",value:function(){var t=(this.o,this.state.dimensions={});this.v.container[0]===this.v.body[0]?(t.containerWidth=document.documentElement.clientWidth,t.containerHeight=document.documentElement.clientHeight,t.containerScrollWidth=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),t.containerScrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t.containerScrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t.containerScrollLeft=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft):(t.containerWidth=this.v.container[0].clientWidth,t.containerHeight=this.v.container[0].clientHeight,t.containerScrollWidth=this.v.container[0].scrollWidth,t.containerScrollHeight=this.v.container[0].scrollHeight,t.containerScrollTop=this.v.container[0].scrollTop,t.containerScrollLeft=this.v.container[0].scrollLeft),t.containerMaxScrollTop=t.containerScrollHeight-t.containerHeight,t.winHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t.autoheight=this.v.container[0]===this.v.body[0]?t.winHeight:t.containerHeight}},{key:"_setMaxHeight",value:function(t){function e(t,e){return parseInt(t.css(e+"Top"))+parseInt(t.css(e+"Bottom"))||0}var n=this.o;if(n.autoheight&&("image"!==n.autoheight||"image"===t.type)){this.state.autoheightAdded||(this.v.wrap.addClass("njm-autoheight"),n.autoheight===!0?this.v.wrap.addClass("njm-autoheight--true"):this.v.wrap.addClass("njm-autoheight--image"),this.state.autoheightAdded=!0);var i=t.dom,o=e(i.modal,"margin"),s=e(i.modal,"padding")+parseInt(i.modal.css("borderTopWidth"))+parseInt(i.modal.css("borderBottomWidth"))||0,r=e(i.body,"margin"),a=e(i.body,"padding")+parseInt(i.body.css("borderTopWidth"))+parseInt(i.body.css("borderBottomWidth"))||0,l=this.state.dimensions.autoheight,c=l,d="border-box"===i.body.css("boxSizing"),h=0,u=0;i.header&&i.header.length?h=i.header[0].scrollHeight+(parseInt(i.header.css("borderTopWidth"))+parseInt(i.header.css("borderBottomWidth")))||0:0,i.footer&&i.footer.length?u=i.footer[0].scrollHeight+(parseInt(i.footer.css("borderTopWidth"))+parseInt(i.footer.css("borderBottomWidth")))||0:0,c=l-o-s-r-h-u,d||(c-=a),i.body.css("maxHeight",c+"px")}}},{key:"_createRawItems",value:function(){return[this.o]}},{key:"_gatherElements",value:function(){return this.o.el}},{key:"_gatherData",value:function(t){function e(t){var e={};for(var i in t)if(t.hasOwnProperty(i)&&/^njm[A-Z]+/.test(i)){var o=i.match(/^njm(.*)/)[1],s=o.charAt(0).toLowerCase()+o.slice(1);e[s]=n(t[i])}return e}function n(t){var e=parseFloat(t);return"true"===t||"false"!==t&&(isNaN(e)?t:e)}var i=this.o,o=d(t),s=o.data(),r={};if(!o.length)return r;if(s.njmOptions)try{r=d.parseJSON(s.njmOptions),delete s.njmOptions}catch(t){return void this._error("njBox, fail to parse options from njm-options")}if(o.length&&(r.el=o),"a"===o[0].tagName.toLowerCase()){var a=o.attr("href");a&&"#"!==a&&"#!"!==a&&!/^(?:javascript)/i.test(a)&&(r.content=a)}if(i.title_attr){var l=o.attr(i.title_attr);l&&(r.title=l)}return d.extend(!0,r,e(s)),this._cb("data_gathered",r,o[0]),r}},{key:"_createItems",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(this._createItem(t[n]));return e}},{key:"_createItem",value:function(t){var e=this._normalizeItem(t);return this._createDomForItem(e),e}},{key:"_normalizeItem",value:function(t,e){var n=void 0;return n="function"==typeof t.content?t.content.call(this,t):t.content,{content:n||this.o.text._missedContent,type:t.type||this._type(t.content||this.o.text._missedContent),header:t.header,footer:t.footer,title:t.title,el:t.el||e,o:{status:"inited"}}}},{key:"_type",value:function(t){var e="html";if("object"===("undefined"==typeof t?"undefined":s(t))){if(window.jQuery&&t instanceof window.jQuery||window.j&&t instanceof window.j)return"selector"}else{if(/^[#.]\w/.test(t))return"selector";if(/\.(png|jpg|jpeg|gif|tiff|bmp|webp)(\?\S*)?$/i.test(t))return"image"}return e}},{key:"_createDomForItem",value:function(t){var e=this.o,n=t.dom={},i=document.createDocumentFragment();if(n.modalOuter=d(e.templates.modalOuter),n.modalOuter[0].njBox=this,n.modal=d(e.templates.modal),n.modal[0].setAttribute("tabindex","-1"),n.modal[0].njBox=this,!n.modal.length)return void this._error("njBox, error in o.templates.modal");if(n.modalOuter[0].appendChild(n.modal[0]),"template"===t.type)n.modal[0].innerHTML=t.content;else{if(n.body=d(e.templates.body),!n.body.length)return void this._error("njBox, error in o.templates.body");if(this._insertItemBodyContent(t),i.appendChild(n.body[0]),t.header){if(n.header=d(e.templates.header),!n.header.length)return void this._error("njBox, error in o.templates.header");var o=o=null!==n.header[0].getAttribute("data-njm-header")?n.header:n.header.find("[data-njm-header]");o[0].innerHTML=t.header,i.insertBefore(n.header[0],i.firstChild)}if(t.footer){if(n.footer=d(e.templates.footer),!n.footer.length)return void this._error("njBox, error in njBox.templates.footer");var s=s=null!==n.footer[0].getAttribute("data-njm-footer")?n.footer:n.footer.find("[data-njm-footer]");s[0].innerHTML=t.footer,i.appendChild(n.footer[0])}"inside"===e.close&&(n.close=d(e.templates.close),n.close[0].setAttribute("title",e.text.close),i.appendChild(n.close[0])),n.modal[0].appendChild(i)}this._cb("item_dom_created",t)}},{key:"_insertItemBodyContent",value:function(t){this.o;switch(t.type){case"text":"textContent"in t.dom.body[0]?t.dom.body[0].textContent=t.content:t.dom.body[0].innerText=t.content;break;case"html":t.dom.body[0].innerHTML=t.content;break;case"selector":this._getItemFromSelector(t);break;default:return void this._error("njBox, seems that you use wrong type("+t.type+") of item.",!0)}t.o.status="loaded"}},{key:"_getItemFromSelector",value:function(t){t.o.contentEl=d(t.content),t.o.contentEl.length||(t.dom.body[0].innerHTML=t.content)}},{key:"_createDom",value:function(){var t=this.o;if(this.v.container=d(t.container),this.v.container.length||(this._error("njBox, can't find container element. (we use body instead)"),this.v.container=this.v.body),this.v.container[0]!==this.v.body[0]&&"static"===this.v.container.css("position")&&this.v.container.addClass("njm-relative"),this.v.wrap=d(t.templates.wrap),!this.v.wrap.length)return void this._error("njBox, smth wrong with o.templates.wrap.");if(t.class&&this.v.wrap.addClass(t.class),this.v.wrap[0].njBox=this,t.zindex&&this.v.wrap.css("zIndex",t.zindex),this.v.items=this.v.wrap.find(".njm-items"),this.v.container[0]!==this.v.body[0]&&(t.position="absolute"),"absolute"===t.position&&this.v.wrap.addClass("njm-absolute"),"outside"===t.close){var e=this.v.close=d(t.templates.close),e=e[0];e.setAttribute("title",t.text.close),this.v.wrap[0].appendChild(e)}this.v.focusCatcher=d(t.templates.focusCatcher),this.v.wrap[0].appendChild(this.v.focusCatcher[0])}},{key:"_drawItem",value:function(t){var e=(this.o,this.items[t]);return e?(this._cb("item_insert",e,t),this._insertSelectorElements(),this.v.items[0].appendChild(e.dom.modalOuter[0]),void this._cb("item_inserted",e,t)):void this._error("njBox, we have no item with this index - "+t,!0)}},{key:"_insertSelectorElements",value:function(){for(var t,e,n=this.items,i=0,o=n.length;i<o;i++)if("selector"===n[i].type){if(t=n[i],t.o.contentElInserted)continue;if(e=t.o.contentEl,e&&e.length||(this._getItemFromSelector(t),e=t.o.contentEl),!e||!e.length)continue;var s=e[0].style.cssText;s&&(t.o.contentElStyle=s);var r="none"===e.css("display");r&&(t.o.contentElDisplayNone=!0,e[0].style.display="block"),t.dom.body[0].innerHTML="",t.dom.body[0].appendChild(e[0]),t.o.contentElInserted=!0}}},{key:"_removeSelectorItemsElement",value:function(){for(var t,e,n=this.items,i=0,o=n.length;i<o;i++)if("selector"===n[i].type){if(t=n[i],!t.o.contentElInserted)continue;e=t.o.contentEl,t.o.contentElDisplayNone&&(e[0].style.display="none",t.o.contentElDisplayNone=void 0),t.o.contentElStyle&&(e[0].style.cssText=t.o.contentElStyle,t.o.contentElStyle=void 0),this.v.body[0].appendChild(e[0]),t.o.contentElInserted=!1}}},{key:"_setFocusInPopup",value:function(){var t,e=this.o;e.focus&&(t=this.items[this.active].dom.modal.find(e.focus)),t&&t.length||(t=this.items[this.active].dom.modal.find(e._focusable)),t&&t.length?t[0].focus():"outside"===e.close?this.v.close[0].focus():"inside"===e.close&&this.items[this.active].dom.close?this.items[this.active].dom.close[0].focus():this.items[this.active].dom.modal[0].focus()}},{key:"_setClickHandlers",value:function(){var t=this.o;t.click&&this.els&&this.els.length&&(this._handlers.elsClick=this._clickHandler(),this.els.off("click",this._handlers.elsClick).on("click",this._handlers.elsClick),t.clickels&&d(t.clickels).off("click",this._handlers.elsClick).on("click",this._handlers.elsClick))}},{key:"_clickHandler",value:function(){var t=(this.o,this);return function(e){var n=this;if(e.originalEvent&&(e=e.originalEvent),!("which"in e&&(1!==e.which||1===e.which&&e.ctrlKey&&e.shiftKey)))return e.preventDefault?e.preventDefault():e.returnValue=!1,"inited"!==t.state.state?void t._error("njBox, show, plugin not inited or in not inited state(probably plugin is already visible or destroyed, or smth else..)"):void(d(n).closest(".njm-close-system, .njm-arrow").length||(t.state.clickedEvent=e,t.state.clickedEl=n,t.show()))}}},{key:"_setEventsHandlers",value:function(){var t=this.o,e=this,n=this._handlers;n.container_resize=function(){e.position()},n.container_scroll=function(){e.position()},this.v.container.on("resize",n.container_resize).on("scroll",n.container_scroll),n.wrap_out=function(n){var i=d(n.target),o=i.closest(".njm, [data-njm-close]").length;if(!o)if(n.preventDefault?n.preventDefault():n.returnValue=!1,t.out){if(t.dialog&&e._cb("cancel")===!1)return;e.hide()}else e.items[e.active].dom.modal.addClass("njm_pulse"),e._setFocusInPopup(),setTimeout(function(){e.items[e.active].dom.modal.removeClass("njm_pulse")},e._getAnimTime(e.items[e.active].dom.modal[0]))},n.wrap_resize=function(){},n.wrap_scroll=function(t){},n.wrap_keydown=function(n){switch(e._cb("keydown",n),n.which){case 27:if(t.esc){if(e._cb("cancel")===!1)return;e.hide()}n.preventDefault?n.preventDefault():n.returnValue=!1}},n.wrap_close=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1,t.dialog&&e._cb("cancel")===!1||e.hide()},n.wrap_ok=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e._cb("ok")!==!1&&e.hide()},n.wrap_cancel=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e._cb("cancel")!==!1&&e.hide()},this.v.wrap.on("click",n.wrap_out).on("resize",n.wrap_resize).on("scroll",n.wrap_scroll).on("keydown",n.wrap_keydown).delegate("[data-njm-close]","click",n.wrap_close).delegate("[data-njm-ok]","click",n.wrap_ok).delegate("[data-njm-cancel]","click",n.wrap_cancel),n.window_resize=function(t){e.position()},n.window_scroll=function(t){e.position()},n.window_orientation=function(t){e.position()},this.v.window.on("resize",n.window_resize).on("scroll",n.window_scroll).on("orientationchange",n.window_orientation),n.focusCatch=function(t){e._setFocusInPopup()},this.v.focusCatcher.on("focus",n.focusCatch),this._cb("setEventHandlers")}},{key:"_removeEventsHandlers",value:function(){var t=this._handlers;this.v.container.off("resize",t.container_resize).off("scroll",t.container_scroll),this.v.wrap.off("click",t.wrap_out).off("resize",t.wrap_resize).off("scroll",t.wrap_scroll).off("keydown",t.wrap_keydown).undelegate("[data-njm-close]","click",t.wrap_close).undelegate("[data-njm-ok]","click",t.wrap_ok).undelegate("[data-njm-cancel]","click",t.wrap_cancel),this.v.window.off("resize",t.window_resize).off("scroll",t.window_scroll).off("orientationchange",t.window_orientation);var e=t.elsClick;this._handlers={elsClick:e},this.v.focusCatcher.off("focus",t.focusCatch),this._cb("removeEventHandlers")}},{key:"_scrollbar",value:function(e){var n=this.o;switch(e){case"hide":if("hide"===n.scrollbar){if(this.state.scrollbarHidden)return;if(this.v.container[0]===this.v.body[0]){var i=(document.documentElement.scrollHeight||document.body.scrollHeight)>document.documentElement.clientHeight;this.v.container[0].njm_scrollbar||this.state.scrollbarHidden||!i&&"scroll"!==this.v.html.css("overflowY")&&"scroll"!==this.v.body.css("overflowY")||(this.v.html.addClass("njm-hideScrollbar"),this.v.html.css("paddingRight",parseInt(this.v.html.css("paddingRight"))+t.g.scrollbarSize+"px"))}else{var i=this.v.container[0].scrollHeight>this.v.container[0].clientHeight;this.v.container.addClass("njm-hideScrollbar")}this.state.scrollbarHidden=!0,this.v.container[0].njm_scrollbar?this.v.container[0].njm_scrollbar++:this.v.container[0].njm_scrollbar=1}break;case"show":if(!this.state.scrollbarHidden)return;if(--this.v.container[0].njm_scrollbar)return void delete this.state.scrollbarHidden;if(this.v.container[0].njm_scrollbar=null,this.v.container[0]===this.v.body[0]){this.v.html.removeClass("njm-hideScrollbar");var o=parseInt(this.v.html.css("paddingRight"))-t.g.scrollbarSize;o?this.v.html.css("paddingRight",o+"px"):this.v.html[0].style.paddingRight=""}else{this.v.container.removeClass("njm-hideScrollbar");var o=parseInt(this.v.container.css("paddingRight"))-t.g.scrollbarSize;o?this.v.container.css("paddingRight",o+"px"):this.v.container[0].style.paddingRight=""}delete this.state.scrollbarHidden}}},{key:"_overlay",value:function(t){var e=this.o,n=this;switch(t){case"show":if(this.v.overlay=d(e.templates.overlay),this.state.overlayVisible)return;e.overlay===!0&&(e.overlayassist&&this.v.overlay.css("transitionDuration",this._globals.animShowDur+"ms"),"absolute"===e.position&&this.v.overlay.addClass("njm-absolute"),this.v.container[0].appendChild(this.v.overlay[0]),setTimeout(function(){n.v.overlay.addClass("njm-visible")},0),this.state.overlayVisible=!0);break;case"hide":if(!this.state.overlayVisible)return;e.overlayassist&&this.v.overlay.css("transitionDuration",this._globals.animHideDur+"ms"),this.v.overlay.removeClass("njm-visible"),setTimeout(function(){n.v.overlay[0].parentNode.removeChild(n.v.overlay[0]),e.overlayassist&&(n.v.overlay[0].style.cssText=""),delete n.state.overlayVisible},n._getAnimTime(n.v.overlay[0]))}}},{key:"_calculateAnimations",value:function(){var t,e,n,i,o,s=this.o,r=!1;s.anim&&(o=s.anim.split(" "),t=o[0],e=o[1]?o[1]:o[0]),s.duration&&(s.duration=s.duration.toString(),o=s.duration.split(" "),n=o[0],i=o[1]?o[1]:o[0]);var a=document.createElement("div");a.style.cssText="visibility: hidden; position: absolute;",n&&"auto"!==n||!t?n=parseInt(n)||0:(a.className=(s.animclass||"")+" "+t,document.body.appendChild(a),r=!0,n=this._getAnimTime(a)),i&&"auto"!==i||!e?i=parseInt(i)||0:(a.className=(s.animclass||"")+" "+e,r||(document.body.appendChild(a),r=!0),i=this._getAnimTime(a)),r&&document.body.removeChild(a),this._globals.animShow=t,this._globals.animHide=e,this._globals.animShowDur=n,this._globals.animHideDur=i}},{key:"_getAnimTime",value:function(t,e){return this._getMaxTransitionDuration(t,"animation")||this._getMaxTransitionDuration(t,"transition")}},{key:"_getMaxTransitionDuration",value:function(t,e){var n,i,o,s,r=d(t),a=[];if(!r.length)return 0;if(!e)return 0;n=r.css(e+"Duration"),o=r.css(e+"Delay"),n&&void 0!==n||(n="0s"),i=n.split(", ");for(var l=0,c=i.length;l<c;l++)i[l]=i[l].indexOf("ms")>-1?parseFloat(i[l]):1e3*parseFloat(i[l]);o&&void 0!==o||(o="0s"),s=o.split(", ");for(var l=0,c=s.length;l<c;l++)s[l]=s[l].indexOf("ms")>-1?parseFloat(s[l]):1e3*parseFloat(s[l]);for(var l=0,c=i.length;l<c;l++)a[l]=i[l]+s[l];return Math.max.apply(Math,a)}},{key:"_anim",value:function(t,e){function n(){o.animclass&&r.removeClass(o.animclass),r.removeClass(a),e&&e.apply(s),s._cb("shown")}function i(){o.animclass&&r.removeClass(o.animclass),l===a&&r.removeClass("njm-anim-reverse"),r.removeClass(l),e&&e.apply(s),s._clear(),s._cb("hidden")}var o=this.o,s=this,r=(this.items[this.active].dom.modalOuter,this.items[this.active].dom.modal),a=this._globals.animShow,l=this._globals.animHide,c=this._globals.animShowDur,d=this._globals.animHideDur;switch(t){case"show":this.v.wrap.addClass("njm-visible"),a?(o.animclass&&r.addClass(o.animclass),r.addClass(a),setTimeout(n,c)):n();break;case"hide":this.v.wrap.removeClass("njm-visible"),l?(o.animclass&&r.addClass(o.animclass),l===a&&r.addClass("njm-anim-reverse"),r.addClass(l),setTimeout(i,d)):i()}}},{key:"_clear",value:function(){function t(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var e=this.o;this.v.container[0].njm_instances--,0===this.v.container[0].njm_instances&&this.v.container.removeClass("njm-open"),e.class&&this.v.wrap.removeClass(e.class),this._scrollbar("show"),this.v.wrap&&this.v.wrap.length&&this.v.wrap[0].parentNode.removeChild(this.v.wrap[0]),this._removeSelectorItemsElement(),this.active=0,this.v.items&&this.v.items.length&&t(this.v.items[0]),this.state={inited:!0,state:"inited"},this._cb("clear")}},{key:"_error",value:function(t,e){t&&(e&&this._clear(),console.error(t))}},{key:"_cb",value:function(t){var e,n=this.o;"inited"!==t&&"show"!==t&&"shown"!==t&&"hide"!==t&&"hidden"!==t&&"change"!==t&&"changed"!==t&&"destroy"!==t&&"destroyed"!==t||(this.state.state=t),this._cbStuff(t),this.trigger.apply(this,arguments);var i=Array.prototype.slice.call(arguments);n.oncb&&"function"==typeof n.oncb&&(e=n.oncb.apply(this,i)),this.trigger.apply(this,["cb"].concat(i));var o=Array.prototype.slice.call(arguments,1);if(n.dialog&&("ok"===t||"cancel"===t)){var s=this.items[this.active].dom.modal,r=s.find("[data-njm-prompt-input]"),a=void 0;r.length&&(a=r[0].value||null),o.unshift(a)}return"function"==typeof n["on"+t]&&(e=n["on"+t].apply(this,o)),e}},{key:"_cbStuff",value:function(t){this.o;switch(t){case"shown":this._setFocusInPopup();break;case"hide":this.state.clickedEl&&this.state.clickedEl.focus();break;case"hidden":this.state.state="inited"}}},{key:"on",value:function(t,e){return this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e),this}},{key:"off",value:function(t,e){if(this._events=this._events||{},t in this._events!=!1)return this._events[t].splice(this._events[t].indexOf(e),1),this}},{key:"trigger",value:function(t){if(this._events=this._events||{},t in this._events!=!1){for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1));return this}}}]),t}();h.a={},h.defaults=c.defaults,h.autobind=function(){d(h.defaults.autobind).each(function(){this.njBox||new h({elem:d(this)})})},h.alert=function(t,e,n){return new h({content:function(e){return'<div class="njm__body">\n                                    '+(t||this.o.text._missedContent)+'\n                                  </div>\n                                  <div class="njm__footer">\n                                    <button data-njm-ok>'+this.o.text.ok+"</button>\n                                  </div>"},type:"template",dialog:!0,out:!1,onok:e,oncancel:n}).show()},h.confirm=function(t,e,n){return new h({content:function(e){return'<div class="njm__body">\n                                    '+(t||this.o.text._missedContent)+'\n                                  </div>\n                                  <div class="njm__footer">\n                                    <button data-njm-ok>'+this.o.text.ok+"</button>\n                                    <button data-njm-cancel>"+this.o.text.cancel+"</button>\n                                  </div>"},type:"template",dialog:!0,out:!1,onok:e,oncancel:n}).show()},h.prompt=function(t,e,n,i){return"function"==typeof e&&(i=n,n=e,e=""),new h({content:function(n){return'<div class="njm__body">\n                                    '+(t||this.o.text._missedContent)+'\n                                    <div>\n                                      <input data-njm-prompt-input type="text" placeholder="'+(e||"")+'" />\n                                    </div>\n                                  </div>\n                                  <div class="njm__footer">\n                                    <button data-njm-ok>'+this.o.text.ok+"</button>\n                                    <button data-njm-cancel>"+this.o.text.cancel+"</button>\n                                  </div>"},type:"template",dialog:!0,out:!1,onok:n,oncancel:i}).show()},h.g||(h.g=(0,c.getDefaultInfo)()),e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function t(e){return e=e||"",new t.fn.init(e)};o.match=function(t,e){t===document&&(t=document.documentElement);var n=t.matches||t.matchesSelector||t.oMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;return n.call(t,e)},o.fn=o.prototype,o.fn.init=function(t){var e;"string"==typeof t&&t.length>0?e="<"===t.charAt(0)&&">"===t.charAt(t.length-1)?o.str2dom?o.str2dom(t):[]:document.querySelectorAll(t):t instanceof Array||t instanceof NodeList||t instanceof HTMLCollection||t instanceof o?e=t:t.nodeType||window.Node&&t instanceof Node||t==t.window||"object"===("undefined"==typeof t?"undefined":i(t))?e=[t]:"function"==typeof t?(e=[document],document.addEventListener("DOMContentLoaded",t)):e=[],this.length=e.length;for(var n=0,s=this.length;n<s;n++)this[n]=e[n];return this},o.fn.init.prototype=o.fn,o.fn.each=function(t){for(var e=0,n=this.length;e<n&&t.call(this[e],e,this[e])!==!1;e++);return this},o.str2dom=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes},o.isArray=function(t){return"array"===o.type(t)},o.isFunction=function(t){return"function"==o.type(t)},o.isPlainObject=function(t){var e,n={},i={}.hasOwnProperty;if(!t||"object"!==o.type(t)||t.nodeType||o.isWindow(t))return!1;try{if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(n.ownLast)for(e in t)return i.call(t,e);for(e in t);return void 0===e||i.call(t,e)},o.isWindow=function(t){return null!=t&&t==t.window},o.type=function(t){var e=e={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},n=e.toString;return null==t?t+"":"object"===("undefined"==typeof t?"undefined":i(t))||"function"==typeof t?e[n.call(t)]||"object":"undefined"==typeof t?"undefined":i(t)},o.extend=function(){var t,e,n,s,r,a,l=arguments[0]||{},c=1,d=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[c]||{},c++),"object"===("undefined"==typeof l?"undefined":i(l))||o.isFunction(l)||(l={}),c===d&&(l=this,c--);c<d;c++)if(null!=(r=arguments[c]))for(s in r)t=l[s],n=r[s],l!==n&&(h&&n&&(o.isPlainObject(n)||(e=o.isArray(n)))?(e?(e=!1,a=t&&o.isArray(t)?t:[]):a=t&&o.isPlainObject(t)?t:{},l[s]=o.extend(h,a,n)):void 0!==n&&(l[s]=n));return l},o.inArray=function(t,e,n){return null==e?-1:e.indexOf(t,n)},o.fn.attr=function(t){return this[0].getAttribute(t)},o.fn.find=function(t){var e,n=[];return this.each(function(i){e=Array.prototype.slice.call(this.querySelectorAll(t),""),e.length&&(n=n.concat(e))}),o(n)},o.fn.on=function(t,e){return this.each(function(){this.addEventListener(t,e,!1)})},o.fn.off=function(t,e){return this.each(function(){this.removeEventListener(t,e)})},o.fn.delegate=function(t,e,n){return this.each(function(i){var s=this;this._events||(this._events={}),this._events[e]||(this._events[e]=[]);var r=function(e){var i=e&&e.target||window.event.srcElement,r=e.path;if(!r){r=[];for(var a=i;a;)r.push(a),a=a.parentNode}for(var l=0,c=r.length;l<c&&r[l]!==s;l++)if(r[l]!==document&&o.match(r[l],t)){n.call(r[l],e);break}};r.fn=n,this.addEventListener(e,r,!1),this._events[e].push(r)})},o.fn.undelegate=function(t,e,n){return n||(n=e,e=t),this.each(function(t){var i=this._events,o=this._events[e];if(i&&o){for(var t=0,s=o.length;t<s;t++)if(n===o[t].fn){this.removeEventListener(e,o[t]),delete o[t].fn,o.splice(t,1);break}o.length||delete i[e];var r=!0;for(var a in i)if(i.hasOwnProperty(a)){r=!1;break}r&&delete this._events}})},o.fn.trigger=o.fn.triggerHandler=function(t,e){return this.each(function(n){var i=new CustomEvent(t,{detail:e||null});this.dispatchEvent(i)})},o.fn.data=function(t,e){return this[0].dataset},o.parseJSON=function(t){return JSON.parse(t)},o.fn.css=function(t,e){function n(t){var e,n,i,s=["Webkit","Moz","O","ms"],r=t.charAt(0).toUpperCase()+t.slice(1),a=o[0];if(t in a.style)n=t;else for(var l=0;l<s.length;l++){if(e=s[l]+r,e in a.style){i=s[l],n=e;break}e=void 0}return n}var o=this;if(t)return"float"==t&&(t="styleFloat"),"object"===("undefined"==typeof t?"undefined":i(t))?this.each(function(){for(var e in t)this.style[n(e)]=t[e]}):e?this.each(function(){this.style[n(t)]=e}):getComputedStyle(this[0],null)[n(t)]||void 0},o.fn.hasClass=function(t){return this[0].classList.contains(t)},o.fn.addClass=function(t){var e=t.split(" ");return this.each(function(){for(var t=0,n=e.length;t<n;t++)this.classList.add(e[t])})},o.fn.removeClass=function(t){var e=t.split(" ");return this.each(function(t){for(var t=0,n=e.length;t<n;t++)this.classList.remove(e[t])})},o.fn.closest=function(t){for(var e,n=[],i=0,s=this.length;i<s;i++)if(o.match(this[i],t))n.push(this[i]);else for(e=this[i].parentNode,e===document&&(e=document.documentElement);e&&"HTML"!==e.tagName;)o.match(e,t)&&o.inArray(e,n)===-1&&n.push(e),e=e.parentNode;return o(n)},e.default=o,t.exports=e.default},function(t,e,n){"use strict";function i(){function t(t){var n,i,o,s=["Webkit","Moz","O","ms"],r=t.charAt(0).toUpperCase()+t.slice(1),a=document.createElement("div");if(document.body.insertBefore(a,null),t in a.style)i=t,o=null;else for(var l=0;l<s.length;l++){if(n=s[l]+r,n in a.style){o=s[l];break}n=void 0}var c={js:i||n,css:e(t,o)};if("transform"===t){if(void 0!==a.style[c.js]){a.style[c.js]="translate3d(1px,1px,1px)";var d=window.getComputedStyle(a)[c.js]}c["3d"]=void 0!==d&&d.length>0&&"none"!==d}return document.body.removeChild(a),c}function e(t,e){if(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),null===e)return t;var n=void 0;switch(e){case"Webkit":n="-webkit-"+t;break;case"Moz":n="-moz-"+t;break;case"ms":n="-ms-"+t;break;case"O":n="-o-"+t}return n}var n={},i=document.createElement("div");i.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -99px;",document.body.appendChild(i),n.scrollbarSize=i.offsetWidth-i.clientWidth||0,document.body.removeChild(i),n.oldIE=!(!document.all||document.addEventListener),n.touch="ontouchstart"in window;var o=n;return o.transition=t("transition"),o.transitionDuration=t("transitionDuration"),o.transform=t("transform"),o.animation=t("animation"),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultInfo=i;e.defaults={elem:"",container:"body",position:"fixed",click:!0,clickels:"",overlay:!0,overlayassist:!0,scrollbar:"hide",out:!0,esc:!0,close:"outside",autoheight:!1,focus:"",content:void 0,_missedContent:"njBox plugin: meow, put some content here...",type:"",header:void 0,footer:void 0,class:!1,zindex:!1,anim:"scale",animclass:"animated",duration:"auto",templates:{wrap:'<div class="njm-wrap"><div class="njm-items"></div></div>',overlay:'<div class="njm-overlay"></div>',modalOuter:'<div class="njm-outer" data-njm-outer></div>',modal:'<aside class="njm"></aside>',body:'<div class="njm__body" data-njm-body></div>',header:'<header class="njm__header" data-njm-header></header>',footer:'<footer class="njm__footer" data-njm-footer></footer>',
close:'<button type="button" class="njm-close-system" data-njm-close>×</button>',focusCatcher:'<a href="#!" class="njm-focus-catch">This link is just focus catcher of modal window, link do nothing.</a>'},text:{_missedContent:"njBox plugin: meow, put some content here...",close:"Close (Esc)",ok:"Ok",cancel:"Cancel",placeholder:""},_focusable:'a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]:not(*[tabindex="-1"]), *[contenteditable]',autobind:'[data-toggle~="modal"]'}},function(t,e,n){t.exports=n(0)}])});